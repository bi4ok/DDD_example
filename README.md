# üß± –ü—É—Å—Ç–æ–µ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å DDD-–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–æ–π

–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–µ–∫—Ç, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π [Domain-Driven Design (DDD)](https://en.wikipedia.org/wiki/Domain-driven_design) –≤ FastAPI.  
–°–ª—É–∂–∏—Ç —É—á–µ–±–Ω–æ–π –æ—Å–Ω–æ–≤–æ–π –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã –∏ –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤ DI (–∏–Ω—ä–µ–∫—Ü–∏–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π) —Å –ø–æ–º–æ—â—å—é –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ [Dishka](https://github.com/reagento/dishka).

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–∏–º—è + email)
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ UUID
- üß† –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è DDD-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
- üß™ –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ **Dishka**
- üóÑÔ∏è –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ PostgreSQL —á–µ—Ä–µ–∑ SQLAlchemy 2.x

---

## üõ†Ô∏è –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

- **FastAPI** ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **PostgreSQL** ‚Äî –°–£–ë–î
- **SQLAlchemy 2.x (async)** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î
- **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏
- **Docker + Docker Compose**
- **Dishka** ‚Äî Dependency Injection (DI)

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1. –ö–ª–æ–Ω–∏—Ä—É–π –ø—Ä–æ–µ–∫—Ç

```bash
git clone https://github.com/your-username/your-repo-name.git
cd your-repo-name
```

### 2. –°–æ–∑–¥–∞–π —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤–µ `.env.example`

```env
# –ø—Ä–∏–º–µ—Ä .env
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_USER=fastapi
POSTGRES_PASSWORD=fastapi
POSTGRES_DB=fastapi
```

### 3. –ü—Ä–æ–ø–∏—à–∏ –∞–¥—Ä–µ—Å –ë–î –≤ `alembic.ini`

```ini
# alembic.ini
sqlalchemy.url = postgresql+asyncpg://fastapi:fastapi@db:5432/fastapi
```

> –ò–ª–∏ –∑–∞–¥–∞–π `DATABASE_URL` —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

---

### 4. –°–æ–±–µ—Ä–∏ –∏ –∑–∞–ø—É—Å—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã

```bash
docker compose up --build
```

### 5. –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ (–∏–∑–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)

```bash
docker compose exec app alembic upgrade head
```

---

## üì¨ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–û—Ç–∫—Ä–æ–π [http://localhost:8000/docs](http://localhost:8000/docs) ‚Äî Swagger UI.

1. –í—ã–∑–æ–≤–∏ `POST /users/` —Å —Ç–µ–ª–æ–º:

```json
{
  "name": "–ú–∞–∫—Å–∏–º",
  "email": "maks@example.com"
}
```

2. –°–∫–æ–ø–∏—Ä—É–π `uuid` –∏–∑ –æ—Ç–≤–µ—Ç–∞ –∏ –≤—ã–∑–æ–≤–∏:

```http
GET /users/?user_id=<uuid>
```

---

## üìÅ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ (DDD)

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª—ë–Ω –Ω–∞ —Å–ª–æ–∏:

```
DDD_example/
‚îú‚îÄ‚îÄ alembic/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/  # HTTP –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ application/  # –±–∏–∑–Ω–µ—Å –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ domain/  # –¥–æ–º–µ–Ω–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ infrastructure/  # –∑–¥–µ—Å—å —Ö—Ä–∞–Ω—è—Ç—Å—è –∞–¥–∞–ø—Ç–µ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ ioc_container.py  # IoC - –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
‚îÇ   ‚îî‚îÄ‚îÄ main.py  # —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞
‚îÇ
‚îú‚îÄ‚îÄ .env
‚îú‚îÄ‚îÄ alembic.ini
‚îú‚îÄ‚îÄ docker-compose.yaml


```

---

## üß† –ü–æ—á–µ–º—É —ç—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç?

> –Ø —Ö–æ—Ç–µ–ª –Ω–∞—É—á–∏—Ç—å—Å—è –ø—Ä–∏–º–µ–Ω—è—Ç—å **DDD-–ø–æ–¥—Ö–æ–¥**, –≤–Ω–µ–¥—Ä—è—Ç—å **–∏–Ω—ä–µ–∫—Ü–∏—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π** –∏ —Å–æ–±–∏—Ä–∞—Ç—å **—á–∏—Å—Ç—É—é –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É**.  
> –≠—Ç–æ—Ç —à–∞–±–ª–æ–Ω –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∫–∞–∫ –æ—Å–Ω–æ–≤—É –¥–ª—è –±—É–¥—É—â–∏—Ö FastAPI-–ø—Ä–æ–µ–∫—Ç–æ–≤.

---

